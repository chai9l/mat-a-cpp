
#include "doctest.h"
#include "mat.hpp"
using namespace ariel;

#include <string>
#include <algorithm>
using namespace std;

// string nospaces1(string input) {
// 	std::erase(input, ' ');
// 	std::erase(input, '\t');
// 	std::erase(input, '\n');
// 	std::erase(input, '\r');
// 	return input;
// }

string nospaces(string input) {
    for (char c : input) {
        if (c == ' ') {
            input.erase(remove(input.begin(), input.end(), ' '), input.end());
        }
        else if (c == '\t') {
            input.erase(remove(input.begin(), input.end(), '\t'), input.end());
        }
        else if (c == '\n') {
            input.erase(remove(input.begin(), input.end(), '\n'), input.end());
        }
        else if (c == '\t') {
            input.erase(remove(input.begin(), input.end(), '\r'), input.end());
        }
    }
    return input;
}


TEST_CASE("Good Input") {

    ////////////////////////  3 , x    ////////////////////////
    CHECK(nospaces(mat(3, 3, '@', '-')) == nospaces( "@@@\n"
													 "@-@\n"
													 "@@@"));

    CHECK(nospaces(mat(3, 5, '@', '-')) == nospaces( "@@@\n"
													 "@-@\n"
													 "@-@\n"
                                                     "@-@\n"
													 "@@@"));

    CHECK(nospaces(mat(3, 5, '@', '-')) == nospaces( "@@@\n"
													 "@-@\n"
                                                     "@-@\n"
													 "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
													 "@@@"));

    CHECK(nospaces(mat(3, 9, '@', '-')) == nospaces( "@@@\n"
													 "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
													 "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
													 "@@@"));

    CHECK(nospaces(mat(3, 11, '@', '-')) == nospaces("@@@\n"
													 "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
													 "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
                                                     "@-@\n"
													 "@@@"));

    ////////////////////////  5 , x    ////////////////////////
    CHECK(nospaces(mat(5, 3, '@', '-')) == nospaces( "@@@@@\n"
													 "@---@\n"
													 "@@@@@"));
    
    CHECK(nospaces(mat(5, 5, '@', '-')) == nospaces( "@@@@@\n"
													 "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
													 "@@@@@"));

    CHECK(nospaces(mat(5, 7, '@', '-')) == nospaces( "@@@@@\n"
													 "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
													 "@@@@@"));

    CHECK(nospaces(mat(5, 9, '@', '-')) == nospaces( "@@@@@\n"
													 "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
                                                     "@-@-@\n"
                                                     "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
													 "@@@@@"));

    CHECK(nospaces(mat(5, 11, '@', '-')) == nospaces("@@@@@\n"
													 "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
                                                     "@-@-@\n"
                                                     "@-@-@\n"
                                                     "@-@-@\n"
                                                     "@---@\n"
                                                     "@@@@@\n"
                                                     "@---@\n"
													 "@@@@@"));

    ////////////////////////  7 , x    ////////////////////////
    CHECK(nospaces(mat(7, 3, '@', '-')) == nospaces( "@@@@@@@\n"
												     "@-----@\n"
												     "@@@@@@@"));

    CHECK(nospaces(mat(7, 5, '@', '-')) == nospaces( "@@@@@@@\n"
												     "@-----@\n"
                                                     "@@@@@@@\n"
                                                     "@-----@\n"
												     "@@@@@@@"));

    CHECK(nospaces(mat(7, 7, '@', '-')) == nospaces( "@@@@@@@\n"
												     "@-----@\n"
                                                     "@-@@@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@@@-@\n"
                                                     "@-----@\n"
												     "@@@@@@@"));

    CHECK(nospaces(mat(7, 9, '@', '-')) == nospaces( "@@@@@@@\n"
												     "@-----@\n"
                                                     "@-@@@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@@@-@\n"
                                                     "@-----@\n"
												     "@@@@@@@"));

    CHECK(nospaces(mat(7, 11, '@', '-')) == nospaces("@@@@@@@\n"
												     "@-----@\n"
                                                     "@-@@@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@-@-@\n"
                                                     "@-@@@-@\n"
                                                     "@-----@\n"
												     "@@@@@@@"));
    ////////////////////////  9 , x    ////////////////////////
    CHECK(nospaces(mat(9, 3, '@', '-')) == nospaces( "@@@@@@@@@\n"
												     "@-------@\n"
												     "@@@@@@@@@"));
                                                     
    CHECK(nospaces(mat(9, 5, '@', '-')) == nospaces( "@@@@@@@@@\n"
												     "@-------@\n"
                                                     "@@@@@@@@@\n"
                                                     "@-------@\n"
												     "@@@@@@@@@"));

    CHECK(nospaces(mat(9, 7, '@', '-')) == nospaces( "@@@@@@@@@\n"
												     "@-------@\n"
                                                     "@-@@@@@-@\n"
                                                     "@-@---@-@\n"
                                                     "@-@@@@@-@\n"
                                                     "@-------@\n"
												     "@@@@@@@@@"));

    CHECK(nospaces(mat(9, 9, '@', '-')) == nospaces( "@@@@@@@@@\n"
												     "@-------@\n"
                                                     "@-@@@@@-@\n"
                                                     "@-@---@-@\n"
                                                     "@-@-@-@-@\n"
                                                     "@-@---@-@\n"
                                                     "@-@@@@@-@\n"
                                                     "@-------@\n"
												     "@@@@@@@@@"));

    CHECK(nospaces(mat(9, 11, '@', '-')) == nospaces("@@@@@@@@@\n"
												     "@-------@\n"
                                                     "@-@@@@@-@\n"
                                                     "@-@---@-@\n"
                                                     "@-@-@-@-@\n"
                                                     "@-@-@-@-@\n"
                                                     "@-@-@-@-@\n"
                                                     "@-@---@-@\n"
                                                     "@-@@@@@-@\n"
                                                     "@-------@\n"
												     "@@@@@@@@@"));
    ////////////////////////  11 , x    ////////////////////////                                                   
    CHECK(nospaces(mat(11, 3, '@', '-')) == nospaces("@@@@@@@@@@@\n"
												     "@---------@\n"
												     "@@@@@@@@@@@"));
                                                     
    CHECK(nospaces(mat(11, 5, '@', '-')) == nospaces("@@@@@@@@@@@\n"
												     "@---------@\n"
                                                     "@@@@@@@@@@@\n"
                                                     "@---------@\n"
												     "@@@@@@@@@@@"));

    CHECK(nospaces(mat(11, 7, '@', '-')) == nospaces("@@@@@@@@@@@\n"
												     "@---------@\n"
                                                     "@-@@@@@@@-@\n"
                                                     "@-@-----@-@\n"
                                                     "@-@@@@@@@-@\n"
                                                     "@---------@\n"
												     "@@@@@@@@@@@"));

    CHECK(nospaces(mat(11, 9, '@', '-')) == nospaces("@@@@@@@@@@@\n"
												     "@---------@\n"
                                                     "@-@@@@@@@-@\n"
                                                     "@-@-----@-@\n"
                                                     "@-@-@@@-@-@\n"
                                                     "@-@-----@-@\n"
                                                     "@-@@@@@@@-@\n"
                                                     "@---------@\n"
												     "@@@@@@@@@@@"));

    CHECK(nospaces(mat(11, 11, '@', '-')) == nospaces("@@@@@@@@@@@\n"
												      "@---------@\n"
                                                      "@-@@@@@@@-@\n"
                                                      "@-@-----@-@\n"
                                                      "@-@-@@@-@-@\n"
                                                      "@-@-@-@-@-@\n"
                                                      "@-@-@@@-@-@\n"
                                                      "@-@-----@-@\n"
                                                      "@-@@@@@@@-@\n"
                                                      "@---------@\n"
												      "@@@@@@@@@@@"));
    ////////////////////////  11 , x    ////////////////////////                                                   
    CHECK(nospaces(mat(13, 3, '@', '-')) == nospaces("@@@@@@@@@@@@@\n"
												     "@-----------@\n"
												     "@@@@@@@@@@@@@"));
                                                     
    CHECK(nospaces(mat(13, 5, '@', '-')) == nospaces("@@@@@@@@@@@@@\n"
												     "@-----------@\n"
                                                     "@@@@@@@@@@@@@\n"
                                                     "@-----------@\n"
												     "@@@@@@@@@@@@@"));

    CHECK(nospaces(mat(13, 7, '@', '-')) == nospaces("@@@@@@@@@@@@@\n"
												     "@-----------@\n"
                                                     "@-@@@@@@@@@-@\n"
                                                     "@-@-------@-@\n"
                                                     "@-@@@@@@@@@-@\n"
                                                     "@-----------@\n"
												     "@@@@@@@@@@@@@"));

    CHECK(nospaces(mat(13, 9, '@', '-')) == nospaces("@@@@@@@@@@@@@\n"
												     "@-----------@\n"
                                                     "@-@@@@@@@@@-@\n"
                                                     "@-@-------@-@\n"
                                                     "@-@-@@@@@-@-@\n"
                                                     "@-@-------@-@\n"
                                                     "@-@@@@@@@@@-@\n"
                                                     "@-----------@\n"
												     "@@@@@@@@@@@@@"));

    CHECK(nospaces(mat(13, 11, '@', '-')) == nospaces("@@@@@@@@@@@@@\n"
												      "@-----------@\n"
                                                      "@-@@@@@@@@@-@\n"
                                                      "@-@-------@-@\n"
                                                      "@-@-@@@@@-@-@\n"
                                                      "@-@-@---@-@-@\n"
                                                      "@-@-@@@@@-@-@\n"
                                                      "@-@-------@-@\n"
                                                      "@-@@@@@@@@@-@\n"
                                                      "@-----------@\n"
												      "@@@@@@@@@@@@@"));                                                     
}

TEST_CASE("Bad Input") {
    CHECK_THROWS(mat(10,5,'@','-'));
    CHECK_THROWS(mat(-7,5,'@','-'));
    CHECK_THROWS(mat(7,-5,'@','-'));
    CHECK_THROWS(mat(-10,5,'@','-'));
    CHECK_THROWS(mat(10,5,'@','-'));
    CHECK_THROWS(mat(10,5,'@','-'));
}